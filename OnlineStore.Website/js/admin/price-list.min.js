function sortProducts(n,t){var i=$(staticTemplates.Loading);t.append(i);$.ajax({url:"/Admin/PriceList/SortProducts",type:"Post",data:{ProductItems:n},success:function(n){n.Success||toastr.error("بروز خطا در مرتب سازی محصولات","خطا")},error:function(){toastr.error("بروز خطا در مرتب سازی محصولات","خطا")},complete:function(){i.remove()}})}function sortSections(n,t){var i=$(staticTemplates.Loading);t.append(i);$.ajax({url:"/Admin/PriceList/SortSections",type:"Post",data:{Col1:n[0],Col2:n[1],Col3:n[2],Col4:n[3],Col5:n[4]},success:function(n){n.Success||toastr.error("بروز خطا در مرتب سازی گروه ها","خطا")},error:function(){toastr.error("بروز خطا در مرتب سازی گروه ها","خطا")},complete:function(){i.remove()}})}function saveChanges(n,t,i,r){var u=$(staticTemplates.Loading);r.append(u);$.ajax({url:"/Admin/PriceList/SaveChanges",type:"Post",data:{ID:n,NewValue:t,PriceListFieldName:i},success:function(n){n.Success||toastr.error("بروز خطا در ویرایش مقادیر","خطا")},error:function(){toastr.error("بروز خطا در ویرایش مقادیر","خطا")},complete:function(){u.remove()}})}var $priceListProducts=$(".price-list-box .column"),$priceListProductsUl=$(".price-list-box ul"),arrSections=[],arrProducts=[];$priceListProductsUl.sortable({stop:function(){var n=$(this),t=n.sortable("toArray",{attribute:"data-id"}),i=n.closest(".portlet");sortProducts(t,i)}});$priceListProducts.sortable({stop:function(){var t=$(this),n=[];$priceListProducts.each(function(){n.push($(this).sortable("toArray",{attribute:"data-id"}))});sortSections(n,t)},connectWith:$priceListProducts,placeholder:"portlet-placeholder ui-corner-all"});$priceListProductsUl.on("change ifChanged","input",function(){var n=$(this),i=n.val(),r=n.closest("li"),u=r.data("id"),t=0;n.hasClass("title")?t=0:n.hasClass("sub-title")?t=1:n.hasClass("price")?t=2:n.hasClass("checkbox")&&(t=3,i=n.prop("checked"));saveChanges(u,i,t,r)});